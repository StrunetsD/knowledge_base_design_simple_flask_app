<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Education Management System - API Tester</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .description {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .tab-btn.active {
            background: #4CAF50;
        }

        .content-area {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s ease;
        }

        button:hover {
            background: #5a67d8;
        }

        .result {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #667eea;
            max-height: 400px;
            overflow-y: auto;
        }

        .result pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .section-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 5px;
        }

        .success {
            color: #28a745;
        }

        .error {
            color: #dc3545;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>üéì Education Management System</h1>
            <p class="description">API Testing Interface</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('organizations')">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</button>
            <button class="tab-btn" onclick="showTab('courses')">–ö—É—Ä—Å—ã</button>
            <button class="tab-btn" onclick="showTab('teachers')">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</button>
            <button class="tab-btn" onclick="showTab('prices')">–¶–µ–Ω—ã</button>
            <button class="tab-btn" onclick="showTab('schedule')">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
            <button class="tab-btn" onclick="showTab('clients')">–ö–ª–∏–µ–Ω—Ç—ã</button>
            <button class="tab-btn" onclick="showTab('requests')">–ó–∞—è–≤–∫–∏</button>
        </div>

        <div class="content-area">
            <!-- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ -->
            <div id="organizations" class="tab-content active">
                <h2 class="section-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏</h2>
                <div class="grid">
                    <div>
                        <h3>–°–æ–∑–¥–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é</h3>
                        <form onsubmit="createOrganization(event)">
                            <div class="form-group">
                                <label>–ö–æ–¥:</label>
                                <input type="text" name="code" required>
                            </div>
                            <div class="form-group">
                                <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                                <input type="text" name="name" required>
                            </div>
                            <div class="form-group">
                                <label>–ê–¥—Ä–µ—Å:</label>
                                <textarea name="address" required></textarea>
                            </div>
                            <div class="form-group">
                                <label>–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                                <input type="text" name="phone">
                            </div>
                            <div class="form-group">
                                <label>Email:</label>
                                <input type="email" name="email">
                            </div>
                            <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
                        </form>
                    </div>
                    <div>
                        <h3>–ü–æ–ª—É—á–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</h3>
                        <button onclick="getOrganizations()">–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</button>
                        <div class="result" id="orgResult"></div>
                    </div>
                </div>
            </div>

            <!-- –ö—É—Ä—Å—ã -->
            <div id="courses" class="tab-content">
                <h2 class="section-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏</h2>
                <div class="grid">
                    <div>
                        <h3>–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å</h3>
                        <form onsubmit="createCourse(event)">
                            <div class="form-group">
                                <label>–ö–æ–¥:</label>
                                <input type="text" name="code" required>
                            </div>
                            <div class="form-group">
                                <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                                <input type="text" name="title" required>
                            </div>
                            <div class="form-group">
                                <label>–¢–∏–ø:</label>
                                <select name="type" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–¥–Ω–∏):</label>
                                <input type="number" name="duration_days" required min="1">
                            </div>
                            <div class="form-group">
                                <label>–ú–∞–∫—Å. —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:</label>
                                <input type="number" name="max_students" required min="1">
                            </div>
                            <div class="form-group">
                                <label>ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:</label>
                                <input type="number" name="organization_id" required>
                            </div>
                            <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
                        </form>
                    </div>
                    <div>
                        <h3>–î–µ–π—Å—Ç–≤–∏—è —Å –∫—É—Ä—Å–∞–º–∏</h3>
                        <button onclick="getCourses()">–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫—É—Ä—Å—ã</button>
                        <div class="form-group">
                            <label>ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞:</label>
                            <input type="number" id="orgIdFilter">
                            <button onclick="getOrgCourses()">–ö—É—Ä—Å—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</button>
                        </div>
                        <div class="result" id="courseResult"></div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ -->
            <div id="teachers" class="tab-content">
                <h2 class="section-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏</h2>
                <div class="grid">
                    <div>
                        <h3>–°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</h3>
                        <form onsubmit="createTeacher(event)">
                            <div class="form-group">
                                <label>–ö–æ–¥:</label>
                                <input type="text" name="code" required>
                            </div>
                            <div class="form-group">
                                <label>–§–ò–û:</label>
                                <input type="text" name="full_name" required>
                            </div>
                            <div class="form-group">
                                <label>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
                                <input type="date" name="birth_date" required>
                            </div>
                            <div class="form-group">
                                <label>–ü–æ–ª:</label>
                                <select name="gender" required>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:</label>
                                <textarea name="education"></textarea>
                            </div>
                            <div class="form-group">
                                <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                                <select name="category">
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                                </select>
                            </div>
                            <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
                        </form>
                    </div>
                    <div>
                        <h3>–î–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏</h3>
                        <button onclick="getTeachers()">–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π</button>
                        <div class="result" id="teacherResult"></div>
                    </div>
                </div>
            </div>

            <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏... -->
            <div id="prices" class="tab-content">
                <h2 class="section-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω–∞–º–∏</h2>
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Ü–µ–Ω -->
            </div>

            <div id="schedule" class="tab-content">
                <h2 class="section-title">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è -->
            </div>

            <div id="clients" class="tab-content">
                <h2 class="section-title">–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</h2>
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ -->
            </div>

            <div id="requests" class="tab-content">
                <h2 class="section-title">–ó–∞—è–≤–∫–∏ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ</h2>
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –∑–∞—è–≤–æ–∫ -->
            </div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:5000/api';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function () {
            loadEnums();
        });

        function showTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabName).classList.add('active');

            // –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        async function loadEnums() {
            try {
                const response = await fetch(`${API_BASE}/enums`);
                const data = await response.json();

                if (data.success) {
                    // –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–µ–ª–µ–∫—Ç—ã
                    fillSelect('select[name="type"]', data.data.course_types);
                    fillSelect('select[name="gender"]', data.data.genders);
                    fillSelect('select[name="category"]', data.data.teacher_categories);
                }
            } catch (error) {
                console.error('Error loading enums:', error);
            }
        }

        function fillSelect(selector, options) {
            const select = document.querySelector(selector);
            options.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option.value;
                opt.textContent = option.label;
                select.appendChild(opt);
            });
        }

        async function getOrganizations() {
            try {
                const response = await fetch(`${API_BASE}/organizations`);
                const data = await response.json();
                displayResult('orgResult', data);
            } catch (error) {
                displayError('orgResult', error);
            }
        }

        async function createOrganization(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData);

            try {
                const response = await fetch(`${API_BASE}/organizations`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                displayResult('orgResult', result);

                if (result.success) {
                    event.target.reset();
                }
            } catch (error) {
                displayError('orgResult', error);
            }
        }

        async function getCourses() {
            try {
                const response = await fetch(`${API_BASE}/courses`);
                const data = await response.json();
                displayResult('courseResult', data);
            } catch (error) {
                displayError('courseResult', error);
            }
        }

        async function getOrgCourses() {
            const orgId = document.getElementById('orgIdFilter').value;
            if (!orgId) {
                alert('–í–≤–µ–¥–∏—Ç–µ ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏');
                return;
            }

            try {
                const response = await fetch(`${API_BASE}/organizations/${orgId}/courses`);
                const data = await response.json();
                displayResult('courseResult', data);
            } catch (error) {
                displayError('courseResult', error);
            }
        }

        async function createCourse(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData);
            data.duration_days = parseInt(data.duration_days);
            data.max_students = parseInt(data.max_students);
            data.organization_id = parseInt(data.organization_id);

            try {
                const response = await fetch(`${API_BASE}/courses`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                displayResult('courseResult', result);

                if (result.success) {
                    event.target.reset();
                }
            } catch (error) {
                displayError('courseResult', error);
            }
        }

        async function getTeachers() {
            try {
                const response = await fetch(`${API_BASE}/teachers`);
                const data = await response.json();
                displayResult('teacherResult', data);
            } catch (error) {
                displayError('teacherResult', error);
            }
        }

        async function createTeacher(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const data = Object.fromEntries(formData);

            try {
                const response = await fetch(`${API_BASE}/teachers`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                displayResult('teacherResult', result);

                if (result.success) {
                    event.target.reset();
                }
            } catch (error) {
                displayError('teacherResult', error);
            }
        }

        function displayResult(elementId, data) {
            const resultDiv = document.getElementById(elementId);
            resultDiv.innerHTML = `
                <div class="${data.success ? 'success' : 'error'}">
                    <strong>${data.success ? '‚úÖ –£—Å–ø–µ—Ö' : '‚ùå –û—à–∏–±–∫–∞'}:</strong> ${data.message || ''}
                </div>
                <pre>${JSON.stringify(data, null, 2)}</pre>
            `;
        }

        function displayError(elementId, error) {
            const resultDiv = document.getElementById(elementId);
            resultDiv.innerHTML = `
                <div class="error">
                    <strong>‚ùå –û—à–∏–±–∫–∞:</strong> ${error.message}
                </div>
            `;
        }
    </script>
</body>

</html>